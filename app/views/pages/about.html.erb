<h1 class="mb-4">About This Application</h1>
<p class="mb-3">Find me in <code>app/views/pages/about.html.erb</code></p>
<%= link_to 'Home', root_path, class: "btn btn-outline-primary mb-4" %>

<div class="row">
  <div class="col-md-7">
    <div class="card mb-4 shadow-sm">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Saved Credit Cards</h5>
      </div>
      <div class="card-body" id="credit_cards">
        <% if @credit_cards.any? %>
          <% @credit_cards.each do |credit_card| %>
            <div class="mb-2 p-2 border rounded d-flex justify-content-between align-items-center">
              <div>
                <strong><%= credit_card.name %></strong>
                <span class="text-muted ms-2">**** **** **** <%= credit_card.number.to_s.last(4) %></span>
                <span class="text-muted ms-2"><%= credit_card.expiry %></span>
              </div>
              <div>
                <%= link_to "Edit", edit_credit_card_path(credit_card), class: "btn btn-sm btn-outline-success me-2" %>
                <%= link_to "Delete", credit_card_path(credit_card), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "btn btn-sm btn-outline-danger" %>
              </div>
            </div>
          <% end %>
        <% else %>
          <p class="text-muted">No credit cards saved yet.</p>
        <% end %>
      </div>
    </div>
  </div>
  <div class="col-md-5">
    <div class="card shadow-sm">
      <div class="card-header bg-success text-white">
        <h5 class="mb-0"><%= @credit_card&.persisted? ? "Edit Credit Card" : "Add a Credit Card" %></h5>
      </div>
      <div class="card-body" id="credit_card_form">
        <form action="<%= @credit_card&.persisted? ? credit_card_path(@credit_card) : credit_cards_path %>" method="post" data-turbo="true">
          <% if @credit_card&.persisted? %>
            <input type="hidden" name="_method" value="patch" />
          <% end %>
          <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
          <div>
            <label for="credit_card_name">Name on Card</label>
            <input type="text" name="credit_card[name]" id="credit_card_name" value="<%= @credit_card&.name %>" class="form-control" />
          </div>
          <div>
            <label for="credit_card_number">Card Number</label>
            <input type="text" name="credit_card[number]" id="credit_card_number" value="<%= @credit_card&.number %>" class="form-control" />
          </div>
          <div>
            <label for="credit_card_expiry">Expiry</label>
            <input type="text" name="credit_card[expiry]" id="credit_card_expiry" value="<%= @credit_card&.expiry %>" class="form-control" placeholder="MM/YY" />
          </div>
          <div class="mt-3">
            <button type="submit" class="btn btn-success">
              <%= @credit_card&.persisted? ? "Update" : "Add" %> Credit Card
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>